# {{ ansible_managed }}

description "FitNesse acceptance testing framework"

start on runlevel [2345]
stop on runlevel [!2345]

setuid {{ fitnesse_username }}
setgid {{ fitnesse_group }}

chdir {{ fitnesse_path }}

env JAVA_APP=fitnesse-standalone.jar
env JAVA_OPTS="-Xms{{ fitnesse_xms|default('128M') }} -Xmx{{ fitnesse_xmx|default('512M') }} -server"
env APP_OPTS="-p {{ fitnesse_port }}"
env LOG_DIR=/var/log/fitnesse/logs

script
    exec /usr/bin/java $JAVA_OPTS -jar $JAVA_APP $APP_OPTS -l $LOG_DIR
end script
